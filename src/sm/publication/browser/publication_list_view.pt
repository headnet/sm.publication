<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

  <div metal:fill-slot="content-core">
    <metal:block define-macro="content-core">
    <form name="advanced"
          action=""
          class="enableAutoFocus"
          tal:attributes="action string:${here/absolute_url}"
          tal:define="count python: context.item_count or view.default_bsize;
                      b_start python:request.get('b_start', 0);
                      b_size python:request.get('b_size', count);
                      batch python:view.results(b_start=b_start, b_size=b_size);
                      ">

      <fieldset id="search-sort-field" i18n:domain="plone"
                class="publicationSearchBox noborder"
                tal:condition="view/has_search">

          <div class="searchRow">
            <span class="searchLabel">Søgeord</span>
            <input class="searchInput" name="searchable"
                   id="searchable" type="text" size="25"
                   title="Search Site"
                   i18n:attributes="title title_search_title;"
                   tal:attributes="value python:request.get('searchable', '');"
                   />
          </div>

          <div class="searchRow">
            <span class="searchLabel">Emne</span>

            <select name="subject" class="searchInput">
              <option value="">Vælg emne</option>

              <tal:block repeat="subject view/all_subjects">
                <option tal:attributes="value python:subject[0];
                                        selected python:request.get('subject', '') == subject[0]"
                        tal:content="python:subject[1]"></option>
              </tal:block>

            </select>
          </div>

          <div class="searchRow">
            <span class="searchLabel">År</span>
            <select name="year" class="searchInput">
              <option value="">Vælg år</option>

              <tal:block repeat="year view/all_years">
                <option tal:content="year"
                        tal:attributes="selected python:request.get('year', '') == str(year)">
                </option>
              </tal:block>

            </select>


          </div>
          <input class="searchPage searchButton allowMultiSubmit"
                 type="submit" value="Search"
                 i18n:attributes="value label_search;"
                 />

      </fieldset>

      <div id="results-bar"
           tal:condition="view/has_search">
        Din søgning gav <b><span tal:content="python:batch.sequence_length"/> resultater</b>
      </div>
      
        <metal:listingmacro define-macro="listing">

          <div id="advanced-results">
            <tal:listing condition="batch">
              <dl metal:define-slot="entries" >
                <tal:entry tal:repeat="item batch" metal:define-macro="entries">
                  <!-- Contents -->
                  <div class="publicationItem visualIEFloatFix">
                    <div class="documentByLine">
                      <tal:block content="item/effective/year"/>
                      <div class="subjects" tal:condition="item/taxonomy_publication_subjects | nothing">
                        <span class="subject"
                            tal:define="subjects item/taxonomy_publication_subjects"
                            tal:repeat="subject python:view.subject_to_text(subjects)"
                            tal:content="subject"/>
                      </div>
                    </div>
                    <h2 class="headline">
                      <a tal:attributes="href item/getURL" 
                         tal:content="item/Title" class="summary url">
                      </a>
                    </h2>
                  </div>
                </tal:entry>
              </dl>
            </tal:listing>


            <!-- Navigation -->
          <div metal:use-macro="here/batch_macros/macros/navigation" /></div>
        </metal:listingmacro>
    </form>
    </metal:block>
  </div>

</body>
</html>
